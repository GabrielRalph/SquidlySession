# This is the Squidly Session Code Base! 

## Getting Started 

- Make sure download submodules using:  
```git submodule update --init --recursive```

- To make changes start by creating your own branch in the repo.

- Host the repository localy as a statically served site .i.e  by clicking ```((.)) Go Live``` in VS code (assuming you have the live server addon installed, and if not install it)

- Go to the [Squidly console](https://squidly.com.au/Console/) and start a session. The session will apear in a new tab and will have a url like this:  
```https://squidly.com.au/Session/?someUniqueCode```  
change it to:  
```https://squidly.com.au/Session/?someUniqueCode&branch=local```    
This will load the session but will import your local code base. You will need to refresh this page when you make edits to the code base.

- In your browser you can also open the page:  
```127.0.0.1:37374/?someUniqueCode```  
This will use your server directly so it should refresh as you make edits (**Unfortunately edits made to css files alone do not cause an immediate refresh so you will have to refresh manually in that scenario**).

## Adding a Feature
A feature template can be found in ```src/Features/TemplateFeature```. You can copy this template feature folder and make your own feature. Once your ready to test your feature, ensure that there is:

- A js module that exports as default a class inheriting the Features class (this is your feature).
- Your feature has a static getter called name that returns a constant string (i.e. the name of your feature)

Once these requirments are met you can update the code base to include your feature by running the following script in your terminal:
```
npm run build
```
*Note: Node js must be installed on your computer to run this*

## Adding SVG Icons
To add an svg icon and the file into the ``src/Utilities/Icons/IconLibrary``. **The icon must be prefixed with "i_"**. After adding the icon run the build script (i.e. ``npm run build``).
Icons can then be used by constructing an Icon instance. The icon class can be imported from "src/Utilities/Icons/icons.js" and the name of your icon (without the prefix) can be provided to a GridIcon as its symbol.

## Referencing Assets
If your feature requires loading assets, e.g. through the fetch api, then the urls to those assets must be resolved using the relURL method exported in src/Utilities/usefull-funcs.js. The method relURL takes two parameters a path as a string relative to the module and the import.meta object which is accessible to all modules. 
```Javascript
const url = relURL("./my-json-asset.json", import.meta)
const response = await fetch(url);
const myJSONAsset = await response.json()
```
**It is crucial that the path is provided as a constant literal string**, using template strings or any dynamically created string will lead to the asset not being added to the compiled code when deployed. 

